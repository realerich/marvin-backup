# Marvin 2.0 架构图

## 朋友圈文案（推荐使用）

```
🚀 折腾了两周，我的AI助手Marvin 2.0终于上线了！

四层架构全打通：
📱 飞书实时交互  →  🗄️ RDS数据中枢
         ↓                    ↓
⚡ ECS执行引擎  →  📦 GitHub代码层

核心能力：
✅ 聊天记录永久保存（飞书↔️RDS实时同步）
✅ 任务自动追踪（一句话创建GitHub Issue）
✅ 每天盘前简报（股票数据自动抓取）
✅ 系统健康监控（挂了自动报警+秒级恢复）
✅ 云端备份（GitHub Pages状态页随时查看）

这才是真正的个人AI基础设施，007不休息的数字员工get ✓

#AI助手 #个人云 #智能自动化 #极客生活 #效率工具
```

---

## 架构图 ASCII

```
╔══════════════════════════════════════════════════════════════════════╗
║                    🤖 Marvin 智能助手架构 v2.0                         ║
╠══════════════════════════════════════════════════════════════════════╣
║                                                                       ║
║  ┌─────────────────────────────────────────────────────────────────┐  ║
║  │                        📱 交互层 - 飞书                          │  ║
║  │   ┌─────────────┐   ┌─────────────┐   ┌─────────────┐          │  ║
║  │   │  即时消息   │   │  任务创建   │   │  系统通知   │          │  ║
║  │   └──────┬──────┘   └──────┬──────┘   └──────┬──────┘          │  ║
║  └──────────┼─────────────────┼─────────────────┼─────────────────┘  ║
║             │                 │                 │                    ║
║             │   实时同步      │   自动转换      │   通知推送         ║
║             ▼                 ▼                 ▼                    ║
║  ┌─────────────────────────────────────────────────────────────────┐  ║
║  │                       🗄️ 数据层 - RDS                            │  ║
║  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐        │  ║
║  │  │消息历史  │  │监控指标  │  │任务追踪  │  │AI记忆    │        │  ║
║  │  │(Postgre) │  │          │  │          │  │          │        │  ║
║  │  └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘        │  ║
║  └───────┼────────────┼────────────┼────────────┼─────────────────┘  ║
║          │            │            │            │                    ║
║          │  数据导出  │            │            │                    ║
║          ▼            ▼            ▼            ▼                    ║
║  ┌─────────────────────────────────────────────────────────────────┐  ║
║  │                       📦 代码层 - GitHub                         │  ║
║  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐          │  ║
║  │  │Issues任务追踪│  │Actions自动化 │  │Pages状态页   │          │  ║
║  │  └──────────────┘  └──────────────┘  └──────────────┘          │  ║
║  └─────────────────────────────────────────────────────────────────┘  ║
║                           ▲                                          ║
║                           │  执行/监控                               ║
║  ┌────────────────────────┴──────────────────────────────────────┐  ║
║  │                       ⚡ 执行层 - ECS                            │  ║
║  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐       │  ║
║  │  │OpenClaw  │  │工作流引擎│  │定时任务  │  │系统监控  │       │  ║
║  │  │(AI核心)  │  │          │  │(Cron)    │  │          │       │  ║
║  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘       │  ║
║  └─────────────────────────────────────────────────────────────────┘  ║
║                                                                       ║
╠══════════════════════════════════════════════════════════════════════╣
║  核心特性                                                              ║
║  ✅ 飞书消息实时同步RDS (连接池+本地队列双重保障)                       ║
║  ✅ 任务自动转GitHub Issue (飞书一句话创建任务)                         ║
║  ✅ 系统全监控 (每小时健康检查 + 异常自动报警)                          ║
║  ✅ 云端备份 (GitHub Pages状态页 + Docker秒级恢复)                      ║
║  ✅ 数据可视化 (RDS→GitHub自动导出)                                     ║
╚══════════════════════════════════════════════════════════════════════╝
```

---

## 数据流向图

```
┌─────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐
│   用户   │────►│   飞书   │────►│ OpenClaw │────►│   RDS    │
└─────────┘     └──────────┘     └──────────┘     └────┬─────┘
                                                       │
                              ┌────────────────────────┤
                              │                        │
                              ▼                        ▼
                        ┌──────────┐            ┌──────────┐
                        │  AI回复  │            │ GitHub   │
                        └──────────┘            │ Issue    │
                                                └──────────┘
```

---

## 技术栈表格

| 层级 | 技术 | 用途 |
|:----:|:-----|:-----|
| 📱 交互层 | Feishu API | 消息收发、任务创建 |
| 🗄️ 数据层 | PostgreSQL 14 (阿里云RDS) | 消息/监控/任务存储 |
| ⚡ 执行层 | Python 3.12 + OpenClaw | AI处理、工作流 |
| 📦 代码层 | GitHub + Docker | 版本控制、容器化 |

---

## 关键指标

| 指标 | 数值 |
|:----:|:----:|
| 消息同步延迟 | < 100ms |
| 数据备份频率 | 每6小时 |
| 系统监控频率 | 每小时 |
| 故障恢复时间 | < 5分钟 |

---

*生成时间: 2026-02-17 09:05*